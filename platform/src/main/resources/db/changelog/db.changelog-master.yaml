databaseChangeLog:
  - changeSet:
      id: 1652804166498-1
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - createSequence:
            incrementBy: 1
            sequenceName: hibernate_sequence
            startValue: 1
  - changeSet:
      id: 1652804166498-2
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_exchange_quote
                  name: id
                  type: VARCHAR(255)
              - column:
                  name: expires_at
                  type: DATETIME
              - column:
                  name: price
                  type: VARCHAR(255)
              - column:
                  name: sell_asset
                  type: VARCHAR(255)
              - column:
                  name: sell_amount
                  type: VARCHAR(255)
              - column:
                  name: sell_delivery_method
                  type: VARCHAR(255)
              - column:
                  name: buy_asset
                  type: VARCHAR(255)
              - column:
                  name: buy_amount
                  type: VARCHAR(255)
              - column:
                  name: buy_delivery_method
                  type: VARCHAR(255)
              - column:
                  name: created_at
                  type: DATETIME
              - column:
                  name: creator_account_id
                  type: VARCHAR(255)
              - column:
                  name: creator_memo
                  type: VARCHAR(255)
              - column:
                  name: creator_memo_type
                  type: VARCHAR(255)
              - column:
                  name: transaction_id
                  type: VARCHAR(255)
              - column:
                  name: price_details
                  type: VARCHAR(255)
            tableName: exchange_quote
  - changeSet:
      id: 1652804166498-3
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_sep24_refund_payment
                  name: sep24_refund_payment_id
                  type: UUID
              - column:
                  constraints:
                    nullable: false
                  name: transaction_id
                  type: UUID
              - column:
                  name: id
                  type: VARCHAR(255)
              - column:
                  name: id_type
                  type: VARCHAR(255)
              - column:
                  name: amount
                  type: VARCHAR(255)
              - column:
                  name: fee
                  type: VARCHAR(255)
            tableName: sep24_refund_payment
  - changeSet:
      id: 1652804166498-4
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_sep24_transaction
                  name: sep_transaction_id
                  type: UUID
              - column:
                  name: id
                  type: VARCHAR(255)
              - column:
                  name: document_type
                  type: VARCHAR(255)
              - column:
                  name: transaction_id
                  type: VARCHAR(255)
              - column:
                  name: stellar_transaction_id
                  type: VARCHAR(255)
              - column:
                  name: external_transaction_id
                  type: VARCHAR(255)
              - column:
                  name: status
                  type: VARCHAR(255)
              - column:
                  name: kind
                  type: VARCHAR(255)
              - column:
                  name: started_at
                  type: BIGINT
              - column:
                  name: completed_at
                  type: BIGINT
              - column:
                  name: asset_code
                  type: VARCHAR(255)
              - column:
                  name: asset_issuer
                  type: VARCHAR(255)
              - column:
                  name: stellar_account
                  type: VARCHAR(255)
              - column:
                  name: receiving_anchor_account
                  type: VARCHAR(255)
              - column:
                  name: from_account
                  type: VARCHAR(255)
              - column:
                  name: to_account
                  type: VARCHAR(255)
              - column:
                  name: memo_type
                  type: VARCHAR(255)
              - column:
                  name: memo
                  type: VARCHAR(255)
              - column:
                  name: protocol
                  type: VARCHAR(255)
              - column:
                  name: domain_client
                  type: VARCHAR(255)
              - column:
                  name: claimable_balance_supported
                  type: BOOLEAN
              - column:
                  name: amount_in
                  type: VARCHAR(255)
              - column:
                  name: amount_out
                  type: VARCHAR(255)
              - column:
                  name: amount_fee
                  type: VARCHAR(255)
              - column:
                  name: amount_in_asset
                  type: VARCHAR(255)
              - column:
                  name: amount_out_asset
                  type: VARCHAR(255)
              - column:
                  name: amount_fee_asset
                  type: VARCHAR(255)
              - column:
                  name: account_memo
                  type: VARCHAR(255)
              - column:
                  name: muxed_account
                  type: VARCHAR(255)
            tableName: sep24_transaction
  - changeSet:
      id: 1652804166498-5
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_sep31_transaction
                  name: id
                  type: VARCHAR(255)
              - column:
                  name: status
                  type: VARCHAR(255)
              - column:
                  name: status_eta
                  type: BIGINT
              - column:
                  name: amount_in
                  type: VARCHAR(255)
              - column:
                  name: amount_in_asset
                  type: VARCHAR(255)
              - column:
                  name: amount_out
                  type: VARCHAR(255)
              - column:
                  name: amount_out_asset
                  type: VARCHAR(255)
              - column:
                  name: amount_fee
                  type: VARCHAR(255)
              - column:
                  name: amount_fee_asset
                  type: VARCHAR(255)
              - column:
                  name: stellar_account_id
                  type: VARCHAR(255)
              - column:
                  name: stellar_memo
                  type: VARCHAR(255)
              - column:
                  name: stellar_memo_type
                  type: VARCHAR(255)
              - column:
                  name: started_at
                  type: DATETIME
              - column:
                  name: completed_at
                  type: DATETIME
              - column:
                  name: stellar_transaction_id
                  type: VARCHAR(255)
              - column:
                  name: external_transaction_id
                  type: VARCHAR(255)
              - column:
                  name: required_info_message
                  type: VARCHAR(255)
              - column:
                  name: quote_id
                  type: VARCHAR(255)
              - column:
                  name: client_domain
                  type: VARCHAR(255)
              - column:
                  name: refunded
                  type: BOOLEAN
              - column:
                  name: updated_at
                  type: DATETIME
              - column:
                  name: transfer_received_at
                  type: DATETIME
              - column:
                  name: message
                  type: VARCHAR(255)
              - column:
                  name: amount_expected
                  type: VARCHAR(255)
              - column:
                  name: fields
                  type: VARCHAR(255)
              - column:
                  name: required_info_updates
                  type: VARCHAR(255)
              - column:
                  name: refunds
                  type: VARCHAR(255)
            tableName: sep31_transaction
  - changeSet:
      id: 1652804166498-6
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_stellar_account_page_token
                  name: account_id
                  type: VARCHAR(255)
              - column:
                  name: cursor
                  type: VARCHAR(255)
            tableName: stellar_account_page_token
  - changeSet:
      id: 1652804166498-7
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_stellar_transaction
                  name: id
                  type: BIGINT
              - column:
                  name: sep_31_transaction_id
                  type: VARCHAR(255)
              - column:
                  name: memo
                  type: VARCHAR(255)
              - column:
                  name: memo_type
                  type: VARCHAR(255)
              - column:
                  name: created_at
                  type: DATETIME
              - column:
                  name: envelope
                  type: VARCHAR(255)
              - column:
                  name: payment
                  type: VARCHAR(255)
            tableName: stellar_transaction
  - changeSet:
      id: 1652804166498-8
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: transaction_id
            baseTableName: sep24_refund_payment
            constraintName: FK_SEP24_REFUND_PAYMENT_ON_TRANSACTION
            referencedColumnNames: sep_transaction_id
            referencedTableName: sep24_transaction
  - changeSet:
      id: 1652804166498-9
      author: stephen (generated)
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: sep_31_transaction_id
            baseTableName: stellar_transaction
            constraintName: FK_STELLAR_TRANSACTION_ON_SEP_31_TRANSACTION
            referencedColumnNames: id
            referencedTableName: sep31_transaction
   # Example on how to include additional changelog files
  - include:
      file: classpath:/db/changelog/2022-05-27.0.add-total_price-and-fee-and-remove-price_details.xml

