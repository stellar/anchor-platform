version: '2.4'
services:
  platform:
    image: stellar/anchor-platform:edge
    command: --sep-server
    env_file:
      - ../../envs/sep24.env
    depends_on:
      - db
      - kafka
      - reference_server
    volumes:
      - .:/config
    ports:
      - "8080:8080" # sep-server
      - "8082:8082" # Java management server

  reference_server:
    extends:
      file: ../common-services/common-services.yaml
      service: reference_server_base
    depends_on:
      - db
      - kafka

  kafka:
    extends:
      file: ../common-services/common-services.yaml
      service: kafka_base
    depends_on:
      - zookeeper

  zookeeper:
    extends:
      file: ../common-services/common-services.yaml
      service: zookeeper_base

  db:
    extends:
      file: ../common-services/common-services.yaml
      service: db_base

